<div class="container mt-4">
  <h2 class="text-center mb-4">Récapitulatif des Services par Mois</h2>

  <!-- Form -->
  <form (submit)="getPointageData()" class="bg-light p-4 rounded shadow-sm">
    <div class="row mb-3">
      <label for="year" class="col-sm-2 col-form-label">Année:</label>
      <div class="col-sm-10">
        <input
          id="year"
          type="number"
          [(ngModel)]="year"
          name="year"
          class="form-control"
          required
        />
      </div>
    </div>

    <div class="row mb-3">
      <label for="state" class="col-sm-2 col-form-label">État:</label>
      <div class="col-sm-10">
        <select
          id="state"
          [(ngModel)]="state"
          name="state"
          class="form-control"
          required
        >
          <option value="present">Présence</option>
          <option value="retard">Retard</option>
          <option value="autorisation">Autorisation</option>
          <option value="absent_non_justifie">Absent Non Justifié</option>
          <option value="absent_court_terme">Absent Court Terme</option>
          <option value="absent_long_terme">Absent Long Terme</option>
          <option value="absent_aut">Absent Aut</option>
          <option value="absent_pay">Absent Payé</option>
        </select>
      </div>
    </div>

    <div class="text-center">
      <button type="submit" class="btn btn-primary">Filtrer</button>
    </div>
  </form>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="text-center mt-3">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <!-- Table -->
  <div *ngIf="pointageData.length > 0" class="table-responsive mt-4">
    <table class="table table-bordered table-striped">
      <thead>
        <tr class="table-dark">
          <th>Service</th>
          <th *ngFor="let month of ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre']">
            {{ month }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of pointageData">
          <td>{{ row.Service }}</td>
          <td *ngFor="let month of ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre']">
            {{ row[month] || 0 }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
